# Accreditation Service

## Technical Choices

- The service design has loosely-coupled components, aiming to a Clean Architecture approach.
- The service contains two modules, `rest-api` and `application`:
    - The Application module design holds only the business-related logic, without knowing how the application is
      exposed (currently only via Rest endpoints).
    - The Rest API module exposes the endpoints to access the application via Rest APIs. The module exposes Spring-based
      controllers that are auto-generated by
      [openapi-generator-maven-plugin](https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-maven-plugin)
      following the API-First approach. Furthermore, this module is responsible for initializing the IoC container and
      preparing the Application services classes to be wired with the proper dependencies.

### Stack

- [Spring Boot](https://spring.io/projects/spring-boot)
- [Project Lombok](https://projectlombok.org/)
- [openapi-generator-maven-plugin](https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-maven-plugin)
- [OpenAPI Spec](https://spec.openapis.org/oas/v3.1.0)
- [JUnit](https://junit.org/junit5/)
- [Maven](https://maven.apache.org/)
- [Docker](https://www.docker.com/)

## Possible Improvements

- Change the application services to be exposed using interfaces + factories, in order to abstract the application concrete
  classes (e.g.: AccreditationService).
- Create a dedicated endpoint to upload the documents, to avoid handling uploaded files in memory. In this scenario the
  `/user/accreditation` endpoint only receives the document locations instead of the base64 encoded file contents.

## Development Instructions

### Start Application Locally

```bash
cd rest-api
mvn spring-boot:run
```

### Run Application Tests

```bash
mvn test
```

### Build Application

```bash
mvn install
```
**NOTE**: The Spring Application (Fat JAR) will be located at *rest-api/target/rest-api-VERSION.jar*.

### OpenAPI Lint

```bash
make openapi-lint
```

### Run Swagger UI

```bash
make openapi-run
```
**NOTE**: Open http://localhost:8000 to access Swagger UI.

### Run Application in Docker

```bash
make docker-run
```

## Postman Testing

1. Import `rest-api/src/main/resources/openapi.yaml` to [Postman](https://learning.postman.com/docs/getting-started/importing-and-exporting-data/).
2. After completed, the Postman should have request examples.

## Additional Information

- [Clean Architecture](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)
- [API-First](https://swagger.io/resources/articles/adopting-an-api-first-approach/)
